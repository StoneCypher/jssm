<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>LOC Shootout | JSSM, a JavaScript state machine - the FSM for FSL</title><meta name="description" content="Documentation for JSSM, a JavaScript state machine - the FSM for FSL"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script async src="../assets/search.js" id="search-script"></script><link rel="stylesheet" href="../assets/pages.css"/></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">JSSM, a JavaScript state machine - the FSM for FSL</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">JSSM, a JavaScript state machine - the FSM for FSL</a></li><li><span>Tutorials</span></li><li><span>Comparisons</span></li><li><a href="Shootout.html">LOC Shootout</a></li></ul><h1> LOC Shootout </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#lines-of-code-shootout" id="lines-of-code-shootout" style="color: inherit; text-decoration: none;">
  <h1>Lines of Code shootout</h1>
</a>
<p>FSL&#39;s biggest benefit is ease of use, from short machines.  However, it&#39;s not
much value to just say that; instead, we should see what the actual difference
is, by comparisons.</p>
<p>When possible, all of these comparisons are taken from the comparison product&#39;s
documentation, and are generally unchanged; when not, by following something
that was; and sometimes to add <code>include</code> or <code>require</code> to make runnable code.
Sometimes details like labels or constancy will be altered to match for
comparison; if so, this will be pointed out.</p>
<p>The JSSM examples are not golfed.  For example, on the states of matter machine,
one could hook all actions, and print from an object whose property names were
the state names, to get that down to two lines; this is the expected &quot;natural&quot;
way to write it, instead.</p>
<p>All code samples are formatted with <code>prettier</code> for fairness.</p>
<p>Numbers in bold represent official code; numbers not in bold are examples I
wrote, and despite good faith, may not represent ideal notation.  If the text
is <fail>red and italic</fail>, that state machine library could not implement
that comparative test correctly due to a missing feature.</p>
<p>Libraries are sorted shortest-average first, with failing libraries sorted to
the end.</p>
<span id="quicktab">

<table>
<thead>
<tr>
<th>Library</th>
<th>Tog</th>
<th>Traf</th>
<th>Matt</th>
<th>Avg</th>
</tr>
</thead>
<tbody><tr>
<td>jssm</td>
<td><strong><a href="#jssm-toggle-machine-1-line">1</a></strong></td>
<td><strong><a href="#jssm-traffic-light-2-lines">2</a></strong></td>
<td><strong><a href="#jssm-states-of-matter-5-lines">5</a></strong></td>
<td>2.66</td>
</tr>
<tr>
<td>state-machine</td>
<td><a href="#state-machine-toggle-machine-5-lines">5</a></td>
<td><a href="#state-machine-traffic-light-8-lines">8</a></td>
<td><a href="#state-machine-states-of-matter-14-lines">14</a></td>
<td>9</td>
</tr>
<tr>
<td>faste</td>
<td><a href="#faste-toggle-machine-4-lines">4</a></td>
<td><a href="#faste-traffic-light-14-lines">14</a></td>
<td><a href="#created-faste-states-of-matter-24-lines">24</a></td>
<td>10.66</td>
</tr>
<tr>
<td>javascript-state-machine</td>
<td><a href="#javascript-state-machine-toggle-machine-7-lines">7</a></td>
<td><a href="#javascript-state-machine-traffic-light-13-lines">13</a></td>
<td><strong><a href="#javascript-state-machine-states-of-matter-23-lines">23</a></strong></td>
<td>14.33</td>
</tr>
<tr>
<td>finity</td>
<td><a href="#created-finity-toggle-machine-7-lines">7</a></td>
<td><a href="#created-finity-traffic-light-10-lines">10</a></td>
<td><a href="#created-finity-states-of-matter-28-lines">28</a></td>
<td>15</td>
</tr>
<tr>
<td>stately</td>
<td><a href="#created-stately-toggle-machine-8-lines">8</a></td>
<td><a href="#created-stately-traffic-light-18-lines">18</a></td>
<td><a href="#created-stately-states-of-matter-24-lines">24</a></td>
<td>16.66</td>
</tr>
<tr>
<td>robot</td>
<td><a href="#created-robot-toggle-machine-17-lines">17</a></td>
<td><a href="#created-robot-traffic-light-24-lines">24</a></td>
<td><a href="#created-robot-states-of-matter-31-lines">31</a></td>
<td>24</td>
</tr>
<tr>
<td>xstate</td>
<td><strong><a href="#xstate-toggle-machine-16-lines">16</a></strong></td>
<td><a href="#created-xstate-traffic-light-36-lines">36</a></td>
<td><a href="#created-xstate-traffic-light-33-lines">33</a></td>
<td>28.33</td>
</tr>
<tr>
<td><fail>nanostate</fail></td>
<td><a href="#nanostate-toggle-machine-8-lines">8</a></td>
<td><strong><a href="#nanostate-traffic-light-12-lines">12</a></strong></td>
<td><fail><a href="#nanostate-states-of-matter-15-lines-%E2%9D%8C-cannot-implement">15</a></fail></td>
<td><fail>11.66</fail></td>
</tr>
<tr>
<td><fail>machina</fail></td>
<td><a href="#machina-toggle-machine-20-lines">20</a></td>
<td><a href="#machina-traffic-light-26-lines">26</a></td>
<td><fail><a href="#machina-states-of-matter-36-lines-%E2%9D%8C-cannot-implement">36</a></fail></td>
<td><fail>27.33</fail></td>
</tr>
</tbody></table>
</span>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

<a href="#toggle-machine" id="toggle-machine" style="color: inherit; text-decoration: none;">
  <h2>Toggle machine</h2>
</a>
<p>In essence, a simple light switch.  Just shows the basics of making states, and
linking them with actions.</p>
<table>
<thead>
<tr>
<th>lib</th>
<th>length</th>
</tr>
</thead>
<tbody><tr>
<td>jssm</td>
<td><a href="#jssm-toggle-machine-1-line">1</a></td>
</tr>
<tr>
<td>faste</td>
<td><a href="#faste-toggle-machine-4-lines">4</a></td>
</tr>
<tr>
<td>state-machine</td>
<td><a href="#state-machine-toggle-machine-5-lines">5</a></td>
</tr>
<tr>
<td>finity</td>
<td><a href="#created-finity-toggle-machine-7-lines">7</a></td>
</tr>
<tr>
<td>javascript-state-machine</td>
<td><a href="#javascript-state-machine-toggle-machine-7-lines">7</a></td>
</tr>
<tr>
<td>stately</td>
<td><a href="#created-stately-toggle-machine-8-lines">8</a></td>
</tr>
<tr>
<td><fail>nanostate</fail></td>
<td><a href="#nanostate-toggle-machine-8-lines">8</a></td>
</tr>
<tr>
<td>xstate</td>
<td><a href="#xstate-toggle-machine-16-lines">16</a></td>
</tr>
<tr>
<td>robot</td>
<td><a href="#created-robot-toggle-machine-17-lines">17</a></td>
</tr>
<tr>
<td><fail>machina</fail></td>
<td><a href="#machina-toggle-machine-20-lines">20</a></td>
</tr>
</tbody></table>
<p>&nbsp;</p>

<a href="#jssm-toggle-machine-1-line" id="jssm-toggle-machine-1-line" style="color: inherit; text-decoration: none;">
  <h3><code>jssm</code> toggle machine, 1 line</h3>
</a>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-6">sm</span><span class="hl-3">`active &#39;TOGGLE&#39; &lt;=&gt; &#39;TOGGLE&#39; inactive;`</span><span class="hl-1">;</span>
</code></pre>
<p>&nbsp;</p>

<a href="#xstate-toggle-machine-16-lines" id="xstate-toggle-machine-16-lines" style="color: inherit; text-decoration: none;">
  <h3><code>xstate</code> toggle machine, 16 lines</h3>
</a>
<p>From <a href="https://xstate.js.org/docs/recipes/svelte.html#machine-js">their documentation</a></p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-6">createMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;toggle&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">initial:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">states:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">inactive:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">TOGGLE:</span><span class="hl-1"> </span><span class="hl-3">&quot;active&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">active:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">TOGGLE:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#javascript-state-machine-toggle-machine-7-lines" id="javascript-state-machine-toggle-machine-7-lines" style="color: inherit; text-decoration: none;">
  <h3><code>javascript-state-machine</code> toggle machine, 7 lines</h3>
</a>
<p>Exported and consted.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StateMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">init:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">transitions:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;toggle&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;active&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;toggle&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;active&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-finity-toggle-machine-7-lines" id="created-finity-toggle-machine-7-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>finity</code> toggle machine, 7 lines</h3>
</a>
<p>Finity did not have a light switch example.  I made this, following <a href="https://github.com/nickuraltsev/finity/blob/master/examples/hierarchical/index.js">this
unrelated machine</a>
as a style guide.</p>
<p>I don&#39;t format <code>finity</code> with <code>prettier</code> because <code>prettier</code> does an unreasonably
bad job with the oddly nested callback structure.  This isn&#39;t finity&#39;s fault.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-2">Finity</span><br/><span class="hl-1">  .</span><span class="hl-6">configure</span><span class="hl-1">()</span><br/><span class="hl-1">    .</span><span class="hl-6">initialState</span><span class="hl-1">(</span><span class="hl-3">&#39;inactive&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;toggle&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;active&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-6">state</span><span class="hl-1">(</span><span class="hl-3">&#39;active&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;toggle&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;inactive&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-6">start</span><span class="hl-1">();</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-stately-toggle-machine-8-lines" id="created-stately-toggle-machine-8-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>stately</code> toggle machine, 8 lines</h3>
</a>
<p>Stately did not have a light switch example.  I made this, following <a href="https://github.com/fschaefer/Stately.js#examples">this
unrelated machine</a> as a style
guide.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-2">Stately</span><span class="hl-1">.</span><span class="hl-6">machine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">inactive:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">toggle:</span><span class="hl-1"> </span><span class="hl-3">&quot;active&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">active:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">toggle:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#nanostate-toggle-machine-8-lines" id="nanostate-toggle-machine-8-lines" style="color: inherit; text-decoration: none;">
  <h3><code>nanostate</code> toggle machine, 8 lines</h3>
</a>
<p>Robot did not have a toggle example.  I made this, following <a href="https://github.com/choojs/nanostate/blob/master/README.md">this unrelated
machine</a> as a style
guide.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-6">nanostate</span><span class="hl-1">(</span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-2">inactive:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">toggle:</span><span class="hl-1"> </span><span class="hl-3">&quot;active&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">active:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">toggle:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-robot-toggle-machine-17-lines" id="created-robot-toggle-machine-17-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>robot</code> toggle machine, 17 lines</h3>
</a>
<p>Robot did not have a toggle example.  I made this, following <a href="https://thisrobot.life/api/action.html">this unrelated
machine</a> as a style guide.</p>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-6">createMachine</span><span class="hl-1">(</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">inactive:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;toggle&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;active&quot;</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">    </span><span class="hl-2">active:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;toggle&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;inactive&quot;</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">);</span>
</code></pre>
<p>&nbsp;</p>

<a href="#faste-toggle-machine-4-lines" id="faste-toggle-machine-4-lines" style="color: inherit; text-decoration: none;">
  <h3><code>faste</code> toggle machine, 4 lines</h3>
</a>
<p>Taken from <a href="https://www.npmjs.com/package/faste#using-different-handlers-in-different-states">the readme</a>.
Renamed, bound, and exported the machine result; changed the labels.</p>
<pre><code class="language-javascript"><span class="hl-6">onClick</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">setState</span><span class="hl-1">( </span><span class="hl-2">state</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> ({ </span><span class="hl-2">enabled:</span><span class="hl-1"> !</span><span class="hl-2">state</span><span class="hl-1">.</span><span class="hl-2">enabled</span><span class="hl-1">}));</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">toggleMachine</span><span class="hl-1"> = </span><span class="hl-6">faste</span><span class="hl-1">()</span><br/><span class="hl-1"> .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;toggle&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;inactive&#39;</span><span class="hl-1">, ({</span><span class="hl-2">transitTo</span><span class="hl-1">}) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&#39;enabled&#39;</span><span class="hl-1">))</span><br/><span class="hl-1"> .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;toggle&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;active&#39;</span><span class="hl-1">, ({</span><span class="hl-2">transitTo</span><span class="hl-1">}) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&#39;disabled&#39;</span><span class="hl-1">))</span>
</code></pre>
<p>&nbsp;</p>

<a href="#state-machine-toggle-machine-5-lines" id="state-machine-toggle-machine-5-lines" style="color: inherit; text-decoration: none;">
  <h3><code>state-machine</code> toggle machine, 5 lines</h3>
</a>
<p>No toggle machine was available; wrote from scratch and used <a href="https://github.com/davestewart/javascript-state-machine/blob/d390627b384b30605b5ee90a70bae713e8b09002/docs/main/usage.md">the docs</a>
for usage guidelines.</p>
<pre><code class="language-javascript"><span class="hl-4">var</span><span class="hl-1"> </span><span class="hl-2">toggleMachine</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StateMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">transitions:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-3">&#39;toggle : inactive &gt; active &gt; inactive&#39;</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#machina-toggle-machine-20-lines" id="machina-toggle-machine-20-lines" style="color: inherit; text-decoration: none;">
  <h3><code>machina</code> toggle machine, 20 lines</h3>
</a>
<p>No toggle machine example was available; wrote from scratch and used the
<code>pedestrianSignal</code> example <a href="http://machina-js.org/">in their landing page</a>
for usage guidelines.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">machina</span><span class="hl-1">.</span><span class="hl-6">Fsm</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">initialState:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">states:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">uninitialized:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;*&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">deferUntilTransition</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">transition</span><span class="hl-1">(</span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">inactive:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_toggle:</span><span class="hl-1"> </span><span class="hl-3">&quot;active&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">active:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_toggle:</span><span class="hl-1"> </span><span class="hl-3">&quot;inactive&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">toggle</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">handle</span><span class="hl-1">(</span><span class="hl-3">&quot;_toggle&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

<a href="#traffic-light" id="traffic-light" style="color: inherit; text-decoration: none;">
  <h2>Traffic light</h2>
</a>
<p>Three state, no <code>off</code>, no <code>flashing red</code>.  Emit a console log of <code>&#39;Red light!&#39;</code>
whenever the red state is entered.</p>
<p>Shows the basics, as well as putting a hook on a state (or a node in some
systems&#39; lingo.)</p>
<table>
<thead>
<tr>
<th>lib</th>
<th>length</th>
</tr>
</thead>
<tbody><tr>
<td>jssm</td>
<td><a href="#jssm-traffic-light-2-lines">2</a></td>
</tr>
<tr>
<td>state-machine</td>
<td><a href="#state-machine-traffic-light-8-lines">8</a></td>
</tr>
<tr>
<td>finity</td>
<td><a href="#created-finity-traffic-light-10-lines">10</a></td>
</tr>
<tr>
<td>javascript-state-machine</td>
<td><a href="#javascript-state-machine-traffic-light-13-lines">13</a></td>
</tr>
<tr>
<td>faste</td>
<td><a href="#faste-traffic-light-14-lines">14</a></td>
</tr>
<tr>
<td>stately</td>
<td><a href="#created-stately-traffic-light-18-lines">18</a></td>
</tr>
<tr>
<td>robot</td>
<td><a href="#created-robot-traffic-light-24-lines">24</a></td>
</tr>
<tr>
<td>xstate</td>
<td><a href="#created-xstate-traffic-light-36-lines">36</a></td>
</tr>
<tr>
<td><fail>nanostate</fail></td>
<td><a href="#nanostate-traffic-light-12-lines">12</a></td>
</tr>
<tr>
<td><fail>machina</fail></td>
<td><a href="#machina-traffic-light-26-lines">26</a></td>
</tr>
</tbody></table>
<p>&nbsp;</p>

<a href="#jssm-traffic-light-2-lines" id="jssm-traffic-light-2-lines" style="color: inherit; text-decoration: none;">
  <h3><code>jssm</code> traffic light, 2 lines</h3>
</a>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-6">sm</span><span class="hl-3">`red &#39;next&#39; =&gt; green &#39;next&#39; =&gt; yellow &#39;next&#39; =&gt; red;`</span><span class="hl-1">;</span><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">hook_global_action</span><span class="hl-1">(</span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">));</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-xstate-traffic-light-36-lines" id="created-xstate-traffic-light-36-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>xstate</code> traffic light, 36 lines</h3>
</a>
<p>There&#39;s <em>most of</em> a traffic light between <a href="https://xstate.js.org/docs/guides/machines.html#options">their documentation here</a>
and <a href="https://xstate.js.org/docs/guides/states.html#state-methods-and-properties">also here</a>,
and it seems to piece together into this:</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-6">createMachine</span><span class="hl-1">(</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">initial:</span><span class="hl-1"> </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">states:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">green:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">next:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">yellow:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">next:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">red:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">entry:</span><span class="hl-1"> </span><span class="hl-3">&quot;alertRed&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">next:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">actions:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">alertGreen</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">context</span><span class="hl-1">, </span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">alert</span><span class="hl-1">(</span><span class="hl-3">&quot;Green!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-finity-traffic-light-10-lines" id="created-finity-traffic-light-10-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>finity</code> traffic light, 10 lines</h3>
</a>
<p><code>finity</code> did not have a traffic light example.  I made this, following <a href="https://github.com/nickuraltsev/finity/blob/master/examples/hierarchical/index.js">this
unrelated machine</a>
as a style guide.</p>
<p>Finity does not appear to support hooking specific transitions, but instead
offers a single global transition hook.</p>
<p>I didn&#39;t format this with <code>prettier</code>, because <code>prettier</code> does a really bad job
with the chain <code>.state().on().transitionTo()</code>; the length doubles and this
becomes unreadable, and that isn&#39;t <code>finity</code>&#39;s fault.</p>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-2">Finity</span><br/><span class="hl-1">  .</span><span class="hl-6">configure</span><span class="hl-1">()</span><br/><span class="hl-1">    .</span><span class="hl-6">initialState</span><span class="hl-1">(</span><span class="hl-3">&#39;red&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">onEnter</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Red light!&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;next&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;green&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-6">state</span><span class="hl-1">(</span><span class="hl-3">&#39;green&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;next&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;yellow&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-6">state</span><span class="hl-1">(</span><span class="hl-3">&#39;yellow&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;next&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;red&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-6">start</span><span class="hl-1">();</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-stately-traffic-light-18-lines" id="created-stately-traffic-light-18-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>stately</code> traffic light, 18 lines</h3>
</a>
<p><code>stately</code> did not have a traffic light example.  I made this, following <a href="https://github.com/fschaefer/Stately.js#examples">this
unrelated machine</a> as a style
guide.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-2">Stately</span><span class="hl-1">.</span><span class="hl-6">machine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">red:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">onEnter</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-6">next</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">green</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">green:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">next</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">yellow</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">gas:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">next</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">red</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#javascript-state-machine-traffic-light-13-lines" id="javascript-state-machine-traffic-light-13-lines" style="color: inherit; text-decoration: none;">
  <h3><code>javascript-state-machine</code> traffic light, 13 lines</h3>
</a>
<p><code>javascript-state-machine</code> did not have a traffic light example.  I made this,
from scratch.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StateMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">init:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">transitions:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-2">methods:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">onRed</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#nanostate-traffic-light-12-lines" id="nanostate-traffic-light-12-lines" style="color: inherit; text-decoration: none;">
  <h3><code>nanostate</code> traffic light, 12 lines</h3>
</a>
<p>Taken from <a href="https://github.com/choojs/nanostate/blob/master/README.md">the readme</a>:</p>
<p>Changed the name of the event from <code>timer</code> to <code>next</code>; exported and consted.
Reordered to start in red, instead of to start in green.</p>
<p>Added a red light hook with <code>.on</code>.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-6">nanostate</span><span class="hl-1">(</span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-2">red:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">next:</span><span class="hl-1"> </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">green:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">next:</span><span class="hl-1"> </span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">yellow:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">next:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;red&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Red light!&#39;</span><span class="hl-1">));</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-robot-traffic-light-24-lines" id="created-robot-traffic-light-24-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>robot</code> traffic light, 24 lines</h3>
</a>
<p>Robot did not have a traffic light example.  I made this, following <a href="https://thisrobot.life/api/action.html">this
unrelated machine</a> as a style
guide.</p>
<p>Robot does not appear to support hooks on nodes, so we&#39;ve faked it with hooks
on transitions.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-6">createMachine</span><span class="hl-1">(</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">red:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;green&quot;</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">    </span><span class="hl-2">green:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;yellow&quot;</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">    </span><span class="hl-2">yellow:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;next&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">action</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">);</span>
</code></pre>
<p>&nbsp;</p>

<a href="#faste-traffic-light-14-lines" id="faste-traffic-light-14-lines" style="color: inherit; text-decoration: none;">
  <h3><code>faste</code> traffic light, 14 lines</h3>
</a>
<p>Taken from <a href="https://www.npmjs.com/package/faste#example">the readme</a>.  Only
change was to rename and export the variable.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-6">faste</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-6">withPhases</span><span class="hl-1">([</span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">])</span><br/><span class="hl-1">  .</span><span class="hl-6">withTransitions</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-2">green:</span><span class="hl-1"> [</span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">yellow:</span><span class="hl-1"> [</span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">red:</span><span class="hl-1"> [</span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-6">withMessages</span><span class="hl-1">([</span><span class="hl-3">&quot;switch&quot;</span><span class="hl-1">])</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;switch&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;switch&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;switch&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code></pre>
<p>&nbsp;</p>

<a href="#state-machine-traffic-light-8-lines" id="state-machine-traffic-light-8-lines" style="color: inherit; text-decoration: none;">
  <h3><code>state-machine</code> traffic light, 8 lines</h3>
</a>
<p>No traffic light was available; wrote from scratch and used <a href="https://github.com/davestewart/javascript-state-machine/blob/d390627b384b30605b5ee90a70bae713e8b09002/docs/main/usage.md">the docs</a>
for usage guidelines.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StateMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">transitions:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-3">&#39;next : red &gt; green &gt; yellow &gt; red&#39;</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-2">handlers:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">&#39;red&#39;</span><span class="hl-2"> :</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Red light!&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#machina-traffic-light-26-lines" id="machina-traffic-light-26-lines" style="color: inherit; text-decoration: none;">
  <h3><code>machina</code> traffic light, 26 lines</h3>
</a>
<p>Adapted from the <code>pedestrianSignal</code> example <a href="http://machina-js.org/">in their landing page</a>.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">machina</span><span class="hl-1">.</span><span class="hl-6">Fsm</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">initialState:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">states:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">uninitialized:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;*&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">deferUntilTransition</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">transition</span><span class="hl-1">(</span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">green:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_next:</span><span class="hl-1"> </span><span class="hl-3">&quot;yellow&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">yellow:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_next:</span><span class="hl-1"> </span><span class="hl-3">&quot;red&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">red:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_next:</span><span class="hl-1"> </span><span class="hl-3">&quot;green&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">_onEnter</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">next</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">handle</span><span class="hl-1">(</span><span class="hl-3">&quot;_next&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

<a href="#states-of-matter" id="states-of-matter" style="color: inherit; text-decoration: none;">
  <h2>States of Matter</h2>
</a>
<p>Three basic states of matter.  Hook each of the four transitions with chatter on
follow.</p>
<p>In addition to the basics, shows how to put a hook on a transition (or an action
or an edge, in other machines&#39; terminology.)</p>
<table>
<thead>
<tr>
<th>lib</th>
<th>length</th>
</tr>
</thead>
<tbody><tr>
<td>jssm</td>
<td><a href="#jssm-states-of-matter-5-lines">5</a></td>
</tr>
<tr>
<td>state-machine</td>
<td><a href="#state-machine-states-of-matter-14-lines">14</a></td>
</tr>
<tr>
<td><fail>nanostate</fail></td>
<td><fail><a href="#nanostate-states-of-matter-15-lines-%E2%9D%8C-cannot-implement">15</a></fail> ❌</td>
</tr>
<tr>
<td>javascript-state-machine</td>
<td><a href="#javascript-state-machine-states-of-matter-23-lines">23</a></td>
</tr>
<tr>
<td>stately</td>
<td><a href="#created-stately-states-of-matter-24-lines">24</a></td>
</tr>
<tr>
<td>faste</td>
<td><a href="#created-faste-states-of-matter-24-lines">24</a></td>
</tr>
<tr>
<td>finity</td>
<td><a href="#created-finity-states-of-matter-28-lines">28</a></td>
</tr>
<tr>
<td>robot</td>
<td><a href="#created-robot-states-of-matter-31-lines">31</a></td>
</tr>
<tr>
<td>xstate</td>
<td><a href="#created-xstate-traffic-light-33-lines">33</a></td>
</tr>
<tr>
<td><fail>machina</fail></td>
<td><fail><a href="#machina-states-of-matter-36-lines-%E2%9D%8C-cannot-implement">36</a></fail> ❌</td>
</tr>
</tbody></table>
<p>&nbsp;</p>

<a href="#jssm-states-of-matter-5-lines" id="jssm-states-of-matter-5-lines" style="color: inherit; text-decoration: none;">
  <h3><code>jssm</code> states of matter, 5 lines</h3>
</a>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-6">sm</span><span class="hl-3">`solid &#39;melt&#39; &lt;=&gt; &#39;freeze&#39; liquid &#39;vaporize&#39; &lt;=&gt; &#39;condense&#39; gas`</span><span class="hl-1">;</span><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">hook_global_action</span><span class="hl-1">(</span><span class="hl-3">&#39;melt&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I melted&#39;</span><span class="hl-1">));</span><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">hook_global_action</span><span class="hl-1">(</span><span class="hl-3">&#39;freeze&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I froze&#39;</span><span class="hl-1">));</span><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">hook_global_action</span><span class="hl-1">(</span><span class="hl-3">&#39;vaporize&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I vaporized&#39;</span><span class="hl-1">));</span><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">hook_global_action</span><span class="hl-1">(</span><span class="hl-3">&#39;condense&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I condensed&#39;</span><span class="hl-1">));</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-xstate-traffic-light-33-lines" id="created-xstate-traffic-light-33-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>xstate</code> traffic light, 33 lines</h3>
</a>
<p>xstate did not have a states of matter example.  I made this, following <a href="https://github.com/nickuraltsev/finity/blob/master/examples/hierarchical/index.js">this
unrelated machine</a>
and <a href="https://xstate.js.org/docs/guides/states.html#state-methods-and-properties">this one</a>,
and <a href="https://xstate.js.org/docs/guides/events.html#sending-events">also this one</a> as style guides.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-6">createMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">initial:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">states:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">solid:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">melt:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">actions</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I melted&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">liquid:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">freeze:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">actions</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">vaporize:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">actions</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">gas:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">on:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">condense:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">actions</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I condensed&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#javascript-state-machine-states-of-matter-23-lines" id="javascript-state-machine-states-of-matter-23-lines" style="color: inherit; text-decoration: none;">
  <h3><code>javascript-state-machine</code> states of matter, 23 lines</h3>
</a>
<p>Used the example <a href="https://github.com/jakesgordon/javascript-state-machine#usage">found here</a>.</p>
<p>Changed the variable name, exported, and consted.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StateMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">init:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">transitions:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;melt&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;freeze&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;vaporize&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;condense&quot;</span><span class="hl-1">, </span><span class="hl-2">from:</span><span class="hl-1"> </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">, </span><span class="hl-2">to:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-2">methods:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">onMelt</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I melted&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">onFreeze</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">onVaporize</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">onCondense</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I condensed&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-finity-states-of-matter-28-lines" id="created-finity-states-of-matter-28-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>finity</code> states of matter, 28 lines</h3>
</a>
<p><code>finity</code> did not have a states of matter example.  I made this, following <a href="https://github.com/nickuraltsev/finity/blob/master/examples/hierarchical/index.js">this
unrelated machine</a>
as a style guide.</p>
<p>Finity does not appear to support hooking specific transitions, but instead
offers a single global transition hook.</p>
<p>I didn&#39;t format this with <code>prettier</code>, because <code>prettier</code> does a really bad job
with the chain <code>.state().on().transitionTo()</code>; the length doubles and this
becomes unreadable, and that isn&#39;t <code>finity</code>&#39;s fault.</p>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-2">Finity</span><br/><span class="hl-1">  .</span><span class="hl-6">configure</span><span class="hl-1">()</span><br/><span class="hl-1">    .</span><span class="hl-6">initialState</span><span class="hl-1">(</span><span class="hl-3">&#39;solid&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;melt&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;liquid&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-6">state</span><span class="hl-1">(</span><span class="hl-3">&#39;liquid&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;vaporize&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;gas&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;freeze&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;solid&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-6">state</span><span class="hl-1">(</span><span class="hl-3">&#39;gas&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&#39;condense&#39;</span><span class="hl-1">).</span><span class="hl-6">transitionTo</span><span class="hl-1">(</span><span class="hl-3">&#39;liquid&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-6">global</span><span class="hl-1">()</span><br/><span class="hl-1">      .</span><span class="hl-6">onTransition</span><span class="hl-1">( (</span><span class="hl-2">fromState</span><span class="hl-1">, </span><span class="hl-2">toState</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-2">fromState</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;solid&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I melted&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;liquid&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">toState</span><span class="hl-1"> === </span><span class="hl-2">solid</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I froze&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">toState</span><span class="hl-1"> === </span><span class="hl-2">gas</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I vaporized&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;gas&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&#39;I condensed&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">  .</span><span class="hl-6">start</span><span class="hl-1">();</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-stately-states-of-matter-24-lines" id="created-stately-states-of-matter-24-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>stately</code> states of matter, 24 lines</h3>
</a>
<p><code>stately</code> did not have a states of matter example.  I made this, following <a href="https://github.com/fschaefer/Stately.js#examples">this
unrelated machine</a> as a style
guide.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-2">Stately</span><span class="hl-1">.</span><span class="hl-6">machine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">solid:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">melt</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I melted&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">liquid</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">liquid:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">freeze</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">solid</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">vaporize</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">gas</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">gas:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">condense</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I condensed&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">liquid</span><span class="hl-1">;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#nanostate-states-of-matter-15-lines-❌-cannot-implement" id="nanostate-states-of-matter-15-lines-❌-cannot-implement" style="color: inherit; text-decoration: none;">
  <h3><code>nanostate</code> states of matter, 15 lines, ❌ cannot implement</h3>
</a>
<p><code>nanostate</code> did not have a states of matter example.  I made this, following
<a href="https://github.com/choojs/nanostate/blob/master/README.md">this unrelated machine</a>
as a style guide.</p>
<p><code>nanostate</code> does not appear to support on-action hooks, and does not appear to
pass the previous state when calling its global enter hook.  Therefore there is
no way to correctly implement the hooks leading to liquid - condense and melt -
because you can&#39;t tell whether they&#39;re coming from solid or gas.  On these
grounds, <code>nanostate</code> cannot implement this machine correctly.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">trafficLight</span><span class="hl-1"> = </span><span class="hl-6">nanostate</span><span class="hl-1">(</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-2">solid:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">melt:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">liquid:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">freeze:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">vaporize:</span><span class="hl-1"> </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">gas:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">condense:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">));</span><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-2">trafficLight</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;❌ FAIL: cannot tell if melt or condense&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">);</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-robot-states-of-matter-31-lines" id="created-robot-states-of-matter-31-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>robot</code> states of matter, 31 lines</h3>
</a>
<p><code>robot</code> did not have a states of matter example.  I made this, following <a href="https://thisrobot.life/api/action.html">this
unrelated machine</a> as a style
guide.</p>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-6">createMachine</span><span class="hl-1">(</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">solid:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;melt&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">action</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I melted&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">    </span><span class="hl-2">liquid:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;freeze&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">action</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;vaporize&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">action</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">    </span><span class="hl-2">gas:</span><span class="hl-1"> </span><span class="hl-6">state</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">transition</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;condense&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">action</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I condensed&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    ),</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">);</span>
</code></pre>
<p>&nbsp;</p>

<a href="#created-faste-states-of-matter-24-lines" id="created-faste-states-of-matter-24-lines" style="color: inherit; text-decoration: none;">
  <h3>(created) <code>faste</code> states of matter, 24 lines</h3>
</a>
<p><code>faste</code> did not have a states of matter example.  I made this, following <a href="https://www.npmjs.com/package/faste#example">this
unrelated machine</a> as a style
guide.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-6">faste</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-6">withPhases</span><span class="hl-1">([</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">])</span><br/><span class="hl-1">  .</span><span class="hl-6">withTransitions</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-2">solid:</span><span class="hl-1"> [</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">liquid:</span><span class="hl-1"> [</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">gas:</span><span class="hl-1"> [</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-6">withMessages</span><span class="hl-1">([</span><span class="hl-3">&quot;melt&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;freeze&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;vaporize&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;condense&quot;</span><span class="hl-1">])</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;melt&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I melted&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;freeze&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;vaporize&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-3">&quot;condense&quot;</span><span class="hl-1">, [</span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">], ({ </span><span class="hl-2">transitTo</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I condensed&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">transitTo</span><span class="hl-1">(</span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code></pre>
<p>&nbsp;</p>

<a href="#state-machine-states-of-matter-14-lines" id="state-machine-states-of-matter-14-lines" style="color: inherit; text-decoration: none;">
  <h3><code>state-machine</code> states of matter, 14 lines</h3>
</a>
<p>No states of matter example was available; wrote from scratch and used <a href="https://github.com/davestewart/javascript-state-machine/blob/d390627b384b30605b5ee90a70bae713e8b09002/docs/main/usage.md">the docs</a>
for usage guidelines.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StateMachine</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">transitions:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;melt     : solid &gt; liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;freeze   : solid &lt; liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;vaporize : liquid &gt; gas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;condense : liquid &lt; gas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-2">handlers:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;@melt&quot;</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I melted&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;@freeze&quot;</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I froze&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;@vaporize&quot;</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I vaporized&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;@condense&quot;</span><span class="hl-2">:</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;I condensed&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>&nbsp;</p>

<a href="#machina-states-of-matter-36-lines-❌-cannot-implement" id="machina-states-of-matter-36-lines-❌-cannot-implement" style="color: inherit; text-decoration: none;">
  <h3><code>machina</code> states of matter, 36 lines, ❌ cannot implement</h3>
</a>
<p>No states of matter example was available; wrote from scratch and used the
<code>pedestrianSignal</code> example <a href="http://machina-js.org/">in their landing page</a>
for usage guidelines.</p>
<p><code>machina</code> does not appear to support on-action hooks, and does not appear to
pass the previous state when calling its global enter hook.  Therefore there is
no way to correctly implement the hooks leading to liquid - condense and melt -
because you can&#39;t tell whether they&#39;re coming from solid or gas.  On these
grounds, <code>machina</code> cannot implement this machine correctly.</p>
<pre><code class="language-javascript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">matter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-2">machina</span><span class="hl-1">.</span><span class="hl-6">Fsm</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">initialState:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">states:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">uninitialized:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;*&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">deferUntilTransition</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">transition</span><span class="hl-1">(</span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">solid:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_melt:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">liquid:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_freeze:</span><span class="hl-1"> </span><span class="hl-3">&quot;solid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">_vaporize:</span><span class="hl-1"> </span><span class="hl-3">&quot;gas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">gas:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">_condense:</span><span class="hl-1"> </span><span class="hl-3">&quot;liquid&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">_onEnter</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Red light!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">melt</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">handle</span><span class="hl-1">(</span><span class="hl-3">&quot;_melt&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">freeze</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">handle</span><span class="hl-1">(</span><span class="hl-3">&quot;_freeze&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">vaporize</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">handle</span><span class="hl-1">(</span><span class="hl-3">&quot;_vaporize&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">condense</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">handle</span><span class="hl-1">(</span><span class="hl-3">&quot;_condense&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class="current pages-entry pages-entry-menu pages-entry-depth-0"><a>Tutorials</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="WhatAreStateMachines.html">What are state machines?</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="GettingStarted.html">☕ <wbr/>Quick <wbr/>Start</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="LanguageReference.html">Language reference</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="todo.html">API reference</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="ExampleMachines.html">Example machines</a></li><li class=" pages-entry pages-entry-menu pages-entry-depth-1"><a>Howtos and <wbr/>Recipes</a></li><li class=" pages-entry pages-entry-menu pages-entry-depth-2"><a>Frameworks</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">React</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Vue</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Angular</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Node</a></li><li class=" pages-entry pages-entry-menu pages-entry-depth-2"><a>Environments</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Node</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Typescript</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">The browser</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="Environments_Deno.html">Deno</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">AWS <wbr/>Lambda</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">SQL</a></li><li class=" pages-entry pages-entry-menu pages-entry-depth-2"><a>Bundling</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Rollup</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Webpack</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">CDN</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-3"><a href="todo.html">Local files</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-2"><a href="todo.html">Let&#39;s make a large machine</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-2"><a href="todo.html">Publishing</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-2"><a href="Styling.html">Theme, style, color</a></li><li class="current pages-entry pages-entry-menu pages-entry-depth-1"><a>Comparisons</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-2"><a href="FeatureComparison.html">Feature comparison</a></li><li class="current pages-entry pages-entry-page pages-entry-depth-2"><a href="Shootout.html">LOC <wbr/>Shootout</a></li><li class=" pages-entry pages-entry-menu pages-entry-depth-0"><a>Tools</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="live_editor.html">Live <wbr/>Editor</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="todo.html">Github <wbr/>Action</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-1"><a href="todo.html">CLI</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-0"><a href="community.html">Community</a></li><li class=" pages-entry pages-entry-page pages-entry-depth-0"><a href="CHANGELOG.long.html">Changelog</a></li><li class=" tsd-kind-module"><a href="../modules/jssm.html">jssm</a></li><li class=" tsd-kind-module"><a href="../modules/jssm_constants.html">jssm_<wbr/>constants</a></li><li class=" tsd-kind-module"><a href="../modules/jssm_error.html">jssm_<wbr/>error</a></li><li class=" tsd-kind-module"><a href="../modules/jssm_types.html">jssm_<wbr/>types</a></li><li class=" tsd-kind-module"><a href="../modules/jssm_util.html">jssm_<wbr/>util</a></li><li class=" tsd-kind-module"><a href="../modules/version.html">version</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li><li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>